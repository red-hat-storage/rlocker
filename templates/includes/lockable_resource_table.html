<div class="row">
	<div class="col-lg-12 justify-content-center">
		<section class="panel">
			<header class="panel-heading">
                Lockable Resources
            </header>
			{% if show_filters %}
			<div class="panel-body">
				<form method="get" action="{% url 'lockable_resources_page' %}">
					<div class="row" style="margin-bottom: 15px;">
						<div class="col-lg-12">
							<div class="form-inline">
								<div class="form-group" style="margin-right: 15px;">
									<label style="margin-right: 5px;"><strong>Status:</strong></label>
									<div class="btn-group" role="group" aria-label="Filter by availability">
										<a href="javascript:void(0)" onclick="setStatusFilter('all')"
										   class="btn btn-sm {% if status_filter == 'all' %}btn-primary{% else %}btn-default{% endif %}">
											<i class="icon_box-checked"></i> All
										</a>
										<a href="javascript:void(0)" onclick="setStatusFilter('free')"
										   class="btn btn-sm {% if status_filter == 'free' %}btn-success{% else %}btn-default{% endif %}">
											<i class="icon_lock-open"></i> Free
										</a>
										<a href="javascript:void(0)" onclick="setStatusFilter('locked')"
										   class="btn btn-sm {% if status_filter == 'locked' %}btn-danger{% else %}btn-default{% endif %}">
											<i class="icon_lock"></i> Locked
										</a>
										<a href="javascript:void(0)" onclick="setStatusFilter('maintenance')"
										   class="btn btn-sm {% if status_filter == 'maintenance' %}btn-warning{% else %}btn-default{% endif %}">
											<i class="icon_lock"></i> Maintenance
										</a>
									</div>
									<input type="hidden" name="status" id="status" value="{{ status_filter }}">
								</div>
								<div class="form-group" style="margin-right: 15px;">
									<label for="provider" style="margin-right: 5px;"><strong>Provider:</strong></label>
									<select name="provider" id="provider" class="form-control input-sm" onchange="this.form.submit()">
										<option value="">All Providers</option>
										{% for provider in all_providers %}
											<option value="{{ provider }}" {% if provider_filter == provider %}selected{% endif %}>
												{{ provider }}
											</option>
										{% endfor %}
									</select>
								</div>
								<div class="form-group">
									<label for="search" style="margin-right: 5px;"><strong>Search:</strong></label>
									<input type="text" name="search" id="search" class="form-control input-sm"
									       placeholder="Name, Label, Sign Off, Description"
									       value="{{ search_text }}"
									       style="width: 300px;">
									<button type="submit" class="btn btn-sm btn-info" style="margin-left: 5px;">
										<i class="icon_search"></i> Search
									</button>
									{% if search_text or provider_filter or status_filter != 'all' %}
										<a href="{% url 'lockable_resources_page' %}" class="btn btn-sm btn-default" style="margin-left: 5px;">
											<i class="icon_close"></i> Clear
										</a>
									{% endif %}
								</div>
							</div>
						</div>
					</div>
				</form>
				<script>
					function setStatusFilter(status) {
						document.getElementById('status').value = status;
						document.querySelector('form').submit();
					}
				</script>
			</div>
			{% endif %}
			<table class="table table-striped table-advance table-hover center-block" style="text-align: center">
				<tbody>
					<tr>
						<th style="text-align: center">
							<i class="icon_profile"></i> ID
						</th>
						<th style="text-align: center">
							<i class="icon_cloud"></i> Provider
						</th>
						<th style="text-align: center">
							<i class="icon_pencil"></i> Name
						</th>
						<th style="text-align: center">
							<i class="icon_chat"></i> Labels
						</th>
						<th style="text-align: center">
							<i class="icon_pens"></i> Sign Off
						</th>
						<th style="text-align: center">
							<i class="icon_question"></i> Status
						</th>
                        <th style="text-align: center">
							<i class="icon_document"></i> Description
						</th>
						<th style="text-align: center">
							<i class="icon_folder-open"></i> Actions
						</th>
                        {% if installed_addons %}
                            <th style="text-align: center">
							    <i class="icon_plus"></i> Addons Options
    						</th>
                        {% endif %}
					</tr>
                    {% for lockable_resource in lockable_resources %}

					<tr id="row-{{ lockable_resource.id }}">
						<td>{{ lockable_resource.id }}</td>
						<td>{{ lockable_resource.provider }}</td>
						<td>
							<a href="{% url 'lockable_resource_more_info' lockable_resource.id %}">
								{{ lockable_resource.name }}
							</a>
						</td>
						<td>{{ lockable_resource.labels }}</td>
						<td>
                            {% if lockable_resource.link %}
                                {% if lockable_resource.link != "None" %}
                                    <a href="{{ lockable_resource.link }}">
                                        <b>{{ lockable_resource.signoff }}</b>
                                    </a>
                                {% else %}
                                     <b>{{ lockable_resource.signoff }}</b>
                                {% endif %}
                            {% else %}
                                <b>{{ lockable_resource.signoff }}</b>
                            {% endif %}
                        </td>
                        <!-- Row Status Start -->
						<td style="color:{{ lockable_resource.status_properties.color }}">
							<i class="{{ lockable_resource.status_properties.icon }}"></i>
							<span>
								<strong>
									{{ lockable_resource.status_properties.status }}
								</strong>
									<br>{{ lockable_resource.status_properties.more_info }}
							</span>
						</td>
						<!-- Row Status End -->
                        <!-- Row Description Start -->
                        <td>
                            <a data-original-title="Description for {{ lockable_resource.name }}"
                                    data-content="{{ lockable_resource.description }}"
                                    data-placement="right" data-trigger="hover"
                                    class="btn btn-info popovers">
                                <i class="icon_document"></i>
                                <span></span> <!-- Could write some text here in the future if we want -->
                            </a>
                        </td>
                        <!-- Row Description End -->

                        <!-- Row Actions Start -->
                        <td>
                            {% include "includes/lockable_resource_actions.html" %}
						</td>
					    <!-- Row Actions End -->
                        <!-- AddOns Dropdown Start -->
                        {% if installed_addons %}
                            {% include "includes/addon_lockable_resource_dropdown.html" %}
                        {% endif %}
                        <!-- AddOns Actions End -->
                    </tr>
                    {% endfor %}
				</tbody>
			</table>
		</section>
	</div>
</div>